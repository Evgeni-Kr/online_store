<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Детали заказа</title>
    <div th:replace="~{common :: styles}"></div>

</head>
<body>
<div th:replace="~{common :: header}"></div>

<main class="container" style="padding: 20px;">
    <a href="/order/get" class="btn btn-link" style="margin-bottom: 20px;">
        ← Назад к списку заказов
    </a>

    <div th:if="${order != null}">
        <h1>Заказ №<span th:text="${order.id}"></span></h1>

        <div class="card" style="margin-bottom: 20px;">
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <h5>Информация о заказе</h5>
                        <p><strong>Статус:</strong>
                            <span th:if="${order.status == 'processed'}" class="badge bg-warning">Обрабатывается</span>
                            <span th:if="${order.status == 'on_the_way'}" class="badge bg-info">В пути</span>
                            <span th:if="${order.status == 'delivered'}" class="badge bg-success">Доставлен</span>
                        </p>
                        <p><strong>Дата оформления:</strong>
                            <span th:text="${#dates.format(order.orderDate, 'dd.MM.yyyy HH:mm')}"></span>
                        </p>
                        <p><strong>Итоговая сумма:</strong>
                            <span th:text="${order.totalPrice}"></span> руб.
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <h3>Товары в заказе</h3>
        <table class="table">
            <thead>
            <tr>
                <th>Товар</th>
                <th>Количество</th>
                <th>Цена</th>
                <th>Сумма</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="item : ${order.items}">
                <td th:text="${item.productName}"></td>
                <td th:text="${item.quantity}"></td>
                <td th:text="${item.price}"></td>
                <td th:text="${item.totalPrice}"></td>
            </tr>
            </tbody>
            <tfoot>
            <tr>
                <td colspan="3" style="text-align: right;"><strong>Итого:</strong></td>
                <td><strong th:text="${order.totalPrice}"></strong> руб.</td>
            </tr>
            </tfoot>
        </table>
    </div>

    <div th:if="${order == null}" class="alert alert-warning">
        Заказ не найден
    </div>
</main>

<div th:replace="~{common :: footer}"></div>
</body>
</html>